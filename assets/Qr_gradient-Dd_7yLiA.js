import{r as s,w as M,f as S,n as z,a as Q,b as t,d as A,e as d,v as c,g as U,t as T,o as L}from"./index-lwaWM59l.js";import{Q as j}from"./browser-BtZzEF0O.js";const B={class:"w-fit mx-auto p-2 sm:p-4 bg-white shadow-md rounded-2xl flex flex-col gap-4 items-center mt-4 px-4"},H={class:"w-full"},_={class:"w-full"},q={class:"w-full border border-gray-300 mt-2 p-3 rounded-lg"},F={class:"flex flex-col sm:flex-row gap-3"},$={class:"flex gap-4 justify-center sm:justify-start"},Z={class:"flex items-center gap-2"},J={class:"flex items-center gap-2"},K={class:"flex-1 min-w-0 mt-3 sm:mt-0"},O={class:"flex items-center gap-2 w-full"},P={class:"w-full mt-2"},W={class:"grid grid-cols-2 gap-4 w-full"},X={class:"w-full"},Y={class:"w-full"},ee={class:"my-4 w-full mt-4"},te={key:0,class:"text-red-500 text-sm"},ne={__name:"Qr_gradient",setup(le){const p=s("https://example.com"),y=s(""),g=s(null),C=s(null),m=s(300),f=s(300),v=s("H"),w=s("#000000"),b=s("#ff0000"),x=s("horizontal"),i=s("");let D=null;const V=(o,e)=>(...l)=>{clearTimeout(D),D=setTimeout(()=>o.apply(this,l),e)},h=async()=>{try{if(i.value="",!g.value||!p.value.trim()){i.value="Canvas no disponible o texto vacío";return}const o=g.value,e=o.getContext("2d",{willReadFrequently:!0});if(o.width=m.value,o.height=f.value,e.fillStyle="#ffffff",e.fillRect(0,0,o.width,o.height),await j.toCanvas(o,p.value,{color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:v.value,width:m.value,margin:1}),await E(e,o),C.value){const l=Math.min(m.value,f.value)*.2;e.drawImage(C.value,(o.width-l)/2,(o.height-l)/2,l,l)}}catch(o){i.value=`Error generando QR: ${o.message}`,console.error("Error:",o)}},E=async(o,e)=>{const l=o.getImageData(0,0,e.width,e.height),a=l.data;let n;switch(x.value){case"vertical":n=o.createLinearGradient(0,0,0,e.height);break;case"diagonal":n=o.createLinearGradient(0,0,e.width,e.height);break;default:n=o.createLinearGradient(0,0,e.width,0)}n.addColorStop(0,w.value),n.addColorStop(1,b.value);const u=document.createElement("canvas");u.width=e.width,u.height=e.height;const R=u.getContext("2d",{willReadFrequently:!0});R.fillStyle=n,R.fillRect(0,0,u.width,u.height);const k=R.getImageData(0,0,u.width,u.height);for(let r=0;r<a.length;r+=4)a[r]<128&&(a[r]=k.data[r],a[r+1]=k.data[r+1],a[r+2]=k.data[r+2]);o.putImageData(l,0,0)},N=V(h,300);M([p,w,b,m,f,v,x],N),S(async()=>{await z(),h()});const G=o=>{const e=o.target.files[0];if(!e)return;const l=new FileReader;l.onload=a=>{const n=new Image;n.onload=()=>{C.value=n,h()},n.onerror=()=>{i.value="Error cargando la imagen"},n.src=a.target.result},l.readAsDataURL(e)},I=()=>{const o=g.value;if(!o){i.value="No hay QR para descargar";return}try{const e=y.value.trim().toLowerCase().replace(/[^a-zA-Z0-9áéíóúñÁÉÍÓÚÑ]/g,"-"),l=o.toDataURL("image/png"),a=document.createElement("a");a.href=l,a.download=`${e||"qr"}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)}catch(e){i.value=`Error descargando: ${e.message}`}};return(o,e)=>(L(),Q("div",B,[e[18]||(e[18]=t("h2",{class:"text-xl font-semibold text-gray-800 text-center sm:text-left"},"Generador de QR Dinámico Gradiente Con Imagen",-1)),t("div",H,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium"},"Texto o Url",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),type:"text",placeholder:"Escribe texto o URL",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[c,p.value]])]),t("div",_,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium"},"Nombre del archivo Qr",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),type:"text",placeholder:"Nombre del archivo",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[c,y.value]])]),t("div",q,[t("div",F,[t("div",$,[t("div",Z,[e[10]||(e[10]=t("label",{class:"text-sm font-medium whitespace-nowrap"},"Color 1:",-1)),d(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=l=>w.value=l),class:"w-8 h-8 sm:w-10 sm:h-10 rounded cursor-pointer"},null,512),[[c,w.value]])]),t("div",J,[e[11]||(e[11]=t("label",{class:"text-sm font-medium whitespace-nowrap"},"Color 2:",-1)),d(t("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=l=>b.value=l),class:"w-8 h-8 sm:w-10 sm:h-10 rounded cursor-pointer"},null,512),[[c,b.value]])])]),t("div",K,[t("div",O,[e[13]||(e[13]=t("label",{class:"text-sm font-medium whitespace-nowrap"},"Dirección:",-1)),d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>x.value=l),class:"text-sm px-2 py-1 border rounded w-full"},e[12]||(e[12]=[t("option",{value:"horizontal"},"Horizontal",-1),t("option",{value:"vertical"},"Vertical",-1),t("option",{value:"diagonal"},"Diagonal",-1)]),512),[[U,x.value]])])])])]),t("div",P,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium mb-1"},"Nivel de corrección de errores:",-1)),d(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),class:"w-full px-2 py-2 border rounded-lg"},e[14]||(e[14]=[t("option",{value:"L"},"L - Bajo (~7%)",-1),t("option",{value:"M"},"M - Medio (~15%)",-1),t("option",{value:"Q"},"Q - Cuartil (~25%)",-1),t("option",{value:"H"},"H - Alto (~30%)",-1)]),512),[[U,v.value]])]),t("div",W,[t("div",X,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-1"},"Ancho (px):",-1)),d(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l),class:"w-full px-3 py-2 border rounded",min:"100"},null,512),[[c,m.value,void 0,{number:!0}]])]),t("div",Y,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-1"},"Alto (px):",-1)),d(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=l=>f.value=l),class:"w-full px-3 py-2 border rounded",min:"100"},null,512),[[c,f.value,void 0,{number:!0}]])])]),t("div",ee,[t("input",{type:"file",accept:"image/*",onChange:G,class:"w-full file:px-4 file:py-2 file:rounded-lg file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),t("canvas",{ref_key:"canvasRef",ref:g,class:"rounded-lg border"},null,512),t("div",{class:"flex flex-wrap gap-4 justify-center w-full"},[t("button",{onClick:h,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Actualizar QR "),t("button",{onClick:I,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Descargar QR ")]),i.value?(L(),Q("div",te,T(i.value),1)):A("",!0)]))}};export{ne as default};
