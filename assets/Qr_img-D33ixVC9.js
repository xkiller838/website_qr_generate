import{r as i,w as b,f as w,a as y,b as o,e as g,v as p,t as h,o as R}from"./index-lwaWM59l.js";import{Q as C}from"./browser-BtZzEF0O.js";import{u as Q}from"./index-D_y43vSW.js";const _={class:"max-w-md mx-auto p-6 bg-white shadow-md rounded-2xl flex flex-col gap-4 items-center mt-4"},k={class:"flex items-center w-full gap-3"},D={class:"text-sm text-gray-600"},U={class:"my-4 w-full"},V={__name:"Qr_img",setup(L){const n=i("https://example.com"),r=i("#000000"),s=i(null),c=i("Digita Nombre QR"),d=i(null),u=async()=>{if(s.value){if(!n.value.trim()){alert("Por favor ingresa texto o una URL");return}if(await C.toCanvas(s.value,n.value,{color:{dark:r.value,light:"#ffffff"},errorCorrectionLevel:"M",width:300,margin:1}),d.value){const l=s.value,e=l.getContext("2d"),t=l.width,a=t*.2;e.drawImage(d.value,(t-a)/2,(t-a)/2,a,a)}}},m=Q(u,300);b([n,r],m,{immediate:!0}),w(u);const v=l=>{const e=l.target.files[0];if(!e)return;const t=new FileReader;t.onload=a=>{const f=new Image;f.onload=()=>{d.value=f,u()},f.src=a.target.result},t.readAsDataURL(e)},x=()=>{const l=s.value;if(!l)return;const e=c.value.trim().toLowerCase().replace(/[^a-zA-Z0-9áéíóúñÁÉÍÓÚÑ]/g,"-"),t=l.toDataURL("image/png"),a=document.createElement("a");a.href=t,a.download=`${e||"qr"}.png`,a.click()};return(l,e)=>(R(),y("div",_,[e[3]||(e[3]=o("h2",{class:"text-xl font-semibold text-gray-800 text-center sm:text-left"},"Generador de QR Dinámico Con Imagen",-1)),g(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),type:"text",placeholder:"Escribe texto o URL",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[p,n.value]]),g(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),type:"text",placeholder:"Nombre del archivo",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[p,c.value]]),o("div",k,[g(o("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),class:"w-10 h-10 rounded border-2 border-gray-300 cursor-pointer"},null,512),[[p,r.value]]),o("span",D,"Color seleccionado: "+h(r.value),1)]),o("div",U,[o("input",{type:"file",accept:"image/*",onChange:v,class:"w-full file:px-4 file:py-2 file:rounded-lg file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),o("canvas",{ref_key:"canvasRef",ref:s,class:"rounded-lg border"},null,512),o("div",{class:"flex flex-wrap gap-4 justify-center w-full"},[o("button",{onClick:u,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Actualizar QR "),o("button",{onClick:x,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Descargar QR ")])]))}};export{V as default};
