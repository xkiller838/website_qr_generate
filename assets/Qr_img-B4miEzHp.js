import{r as i,w as b,f as w,a as y,b as t,e as g,v as m,t as h,o as R}from"./index-C9XWKEMP.js";import{Q as C}from"./browser-BtZzEF0O.js";import{u as k}from"./index-CPB5qCLf.js";const Q={class:"max-w-md mx-auto p-6 bg-white shadow-md rounded-2xl flex flex-col gap-4 items-center mt-4"},_={class:"w-full"},U={class:"w-full"},L={class:"flex items-center w-full gap-3"},D={class:"text-sm text-gray-600"},N={class:"my-4 w-full"},B={__name:"Qr_img",setup(z){const n=i("https://example.com"),r=i("#000000"),s=i(null),d=i(""),c=i(null),u=async()=>{if(s.value){if(!n.value.trim()){alert("Por favor ingresa texto o una URL");return}if(await C.toCanvas(s.value,n.value,{color:{dark:r.value,light:"#ffffff"},errorCorrectionLevel:"M",width:300,margin:1}),c.value){const a=s.value,e=a.getContext("2d"),o=a.width,l=o*.2;e.drawImage(c.value,(o-l)/2,(o-l)/2,l,l)}}},p=k(u,300);b([n,r],p,{immediate:!0}),w(u);const v=a=>{const e=a.target.files[0];if(!e)return;const o=new FileReader;o.onload=l=>{const f=new Image;f.onload=()=>{c.value=f,u()},f.src=l.target.result},o.readAsDataURL(e)},x=()=>{const a=s.value;if(!a)return;const e=d.value.trim().toLowerCase().replace(/[^a-zA-Z0-9áéíóúñÁÉÍÓÚÑ]/g,"-"),o=a.toDataURL("image/png"),l=document.createElement("a");l.href=o,l.download=`${e||"qr"}.png`,l.click()};return(a,e)=>(R(),y("div",Q,[e[5]||(e[5]=t("h2",{class:"text-xl font-semibold text-gray-800 text-center sm:text-left"},"Generador de QR Dinámico Con Imagen ",-1)),t("div",_,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"URL para QR",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),type:"text",placeholder:"Escribe texto o URL",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[m,n.value]])]),t("div",U,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre del archivo",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),type:"text",placeholder:"Nombre del archivo",class:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,512),[[m,d.value]])]),t("div",L,[g(t("input",{type:"color","onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),class:"w-10 h-10 rounded border-2 border-gray-300 cursor-pointer"},null,512),[[m,r.value]]),t("span",D,"Color seleccionado: "+h(r.value),1)]),t("div",N,[t("input",{type:"file",accept:"image/*",onChange:v,class:"w-full file:px-4 file:py-2 file:rounded-lg file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32)]),t("canvas",{ref_key:"canvasRef",ref:s,class:"rounded-lg border"},null,512),t("div",{class:"flex flex-wrap gap-4 justify-center w-full"},[t("button",{onClick:u,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Actualizar QR "),t("button",{onClick:x,class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-all duration-200"}," Descargar QR ")])]))}};export{B as default};
